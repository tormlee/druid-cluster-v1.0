"use strict";Object.defineProperty(exports,"__esModule",{value:true});var Notifier=function(){function e(){}e.create=function(i){i.id=e.counter++;e.notifications.push(i);e.callListeners();return i.id};e.callListeners=function(){e.listeners.forEach(function(i){return i(e.notifications,e.question)})};e.info=function(i,t){e.create({title:i,message:t,priority:"info"})};e.failure=function(i,t){e.create({title:i,message:t,priority:"failure"})};e.success=function(i,t){e.create({title:i,priority:"success",action:t})};e.subscribe=function(i){e.listeners.push(i)};e.stick=function(i){return e.create({title:i,priority:"info",muted:true})};e.removeSticker=function(i){var t;var n=-1;e.notifications.forEach(function(e,o){if(e.id===i){t=e;n=o}});if(!t){console.warn("Trying to remove a non existing sticker");return}t.discarded=true;e.notifications[n]=t;e.callListeners()};e.ask=function(i){if(e.question)throw new Error("There is already a pending question");e.question=i;e.callListeners()};e.removeQuestion=function(){if(!e.question)throw new Error("No question to remove");e.question=undefined;e.callListeners()};e.clear=function(){this.notifications.forEach(function(e){return e.discarded=true});e.callListeners()};e.removeNotification=function(i){var t=e.notifications.indexOf(i);if(t===-1){throw new Error("Trying to remove an unknown notification")}e.notifications.splice(t,1);e.callListeners()};e.unsubscribe=function(i){var t=e.listeners.indexOf(i);if(t===-1){throw new Error("Trying to unsubscribe something that never subscribed")}e.listeners.splice(t,1)};e.handleRemoval=function(i,t,n){e.ask({title:"Remove this "+i,message:['Are you sure you would like to delete "'+n+'"?',"This action is not reversible."],choices:[{label:"Cancel",closeOnClick:true,type:"secondary"},{label:"Delete",closeOnClick:true,callback:t,type:"warn"}],onClose:e.removeQuestion})};e.counter=0;e.notifications=[];e.question=null;e.listeners=[];return e}();exports.Notifier=Notifier;