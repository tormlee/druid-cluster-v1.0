"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var chronoshift_1=require("chronoshift");var immutable_class_1=require("immutable-class");var owasp=require("owasp-password-strength-test");var external_view_1=require("../external-view/external-view");var theme_1=require("../theme/theme");var Customization=function(e){tslib_1.__extends(t,e);function t(t){return e.call(this,t)||this}t.isCustomization=function(e){return e instanceof t};t.fromJS=function(e){if(!e.theme&&e.headerBackground){e.theme=theme_1.Theme.DEFAULT.changeMainColor(e.headerBackground)}if(!e.menuLogoSvg&&e.customLogoSvg){e.menuLogoSvg=e.customLogoSvg}return new t(immutable_class_1.BaseImmutable.jsToValue(t.PROPERTIES,e))};t.prototype.getTitleWithVersion=function(e){return this.getTitle().replace(/%v/g,e)};t.prototype.getIssueWithPass=function(e){var n=Object.assign({},t.DEFAULT_PASS_RULE_OPTIONS,this.getPassRuleOptions());owasp.config(n);var i=owasp.test(e);if(i.requiredTestErrors.length){return i.requiredTestErrors[0]}return null};t.prototype.getEffectiveTheme=function(){return theme_1.Theme.getEffectiveTheme(this.theme)};t.prototype.getPreferredTheme=function(e){var t=this.getEffectiveTheme();if(this.individualThemes==="disable")return t;return theme_1.Theme.getEffectiveTheme(e,t)};t.prototype.renameFilterOrSplit=function(){var e=this,t=e.renameFilterTo,n=e.renameSplitTo;return Boolean(t||n)};t.SETTINGS_MODE_NORMAL="normal";t.SETTINGS_MODE_SUPPRESSED="suppressed";t.DEFAULT_TITLE="Pivot (%v)";t.DEFAULT_TIMEZONES=[new chronoshift_1.Timezone("America/Juneau"),new chronoshift_1.Timezone("America/Los_Angeles"),new chronoshift_1.Timezone("America/Yellowknife"),new chronoshift_1.Timezone("America/Phoenix"),new chronoshift_1.Timezone("America/Denver"),new chronoshift_1.Timezone("America/Mexico_City"),new chronoshift_1.Timezone("America/Chicago"),new chronoshift_1.Timezone("America/New_York"),new chronoshift_1.Timezone("America/Argentina/Buenos_Aires"),chronoshift_1.Timezone.UTC,new chronoshift_1.Timezone("Asia/Jerusalem"),new chronoshift_1.Timezone("Europe/Paris"),new chronoshift_1.Timezone("Asia/Kathmandu"),new chronoshift_1.Timezone("Asia/Hong_Kong"),new chronoshift_1.Timezone("Asia/Seoul"),new chronoshift_1.Timezone("Pacific/Guam")];t.DEFAULT_PASS_RULE_OPTIONS={allowPassphrases:true,maxLength:128,minLength:8,minPhraseLength:20,minOptionalTestsToPass:4};t.PROPERTIES=[{name:"title",defaultValue:t.DEFAULT_TITLE},{name:"theme",defaultValue:null,immutableClass:{fromJS:theme_1.Theme.fromNameOrJS},toJS:theme_1.Theme.toNameOrJS},{name:"homeLogoSvg",defaultValue:null},{name:"menuLogoSvg",defaultValue:null},{name:"externalViews",defaultValue:[],immutableClassArray:external_view_1.ExternalView},{name:"timezones",defaultValue:t.DEFAULT_TIMEZONES,immutableClassArray:chronoshift_1.Timezone},{name:"logoutHref",defaultValue:null},{name:"launcherHref",defaultValue:null},{name:"linkViewMode",defaultValue:false},{name:"singleClusterMode",defaultValue:false},{name:"passRuleOptions",defaultValue:t.DEFAULT_PASS_RULE_OPTIONS,equal:function(e,t){return JSON.stringify(e)===JSON.stringify(t)}},{name:"settingsMode",defaultValue:t.SETTINGS_MODE_NORMAL},{name:"clientMonitor",defaultValue:"allow"},{name:"renameFilterTo",defaultValue:null},{name:"renameSplitTo",defaultValue:null},{name:"rawDataLimit",defaultValue:100},{name:"splitLimits",defaultValue:null,type:immutable_class_1.PropertyType.ARRAY},{name:"individualThemes",defaultValue:"allow"}];return t}(immutable_class_1.BaseImmutable);exports.Customization=Customization;immutable_class_1.BaseImmutable.finalize(Customization);Customization.BLANK=Customization.fromJS({});