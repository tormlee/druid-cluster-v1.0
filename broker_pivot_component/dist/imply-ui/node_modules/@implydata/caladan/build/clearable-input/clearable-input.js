"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var little_pictures_1=require("@implydata/little-pictures");var React=require("react");var global_event_listener_1=require("../global-event-listener/global-event-listener");var svg_icon_1=require("../svg-icon/svg-icon");function focusOnInput(e){if(!e)return;e.focus()}var ClearableInput=function(e){tslib_1.__extends(t,e);function t(){return e.call(this)||this}t.prototype.onChange=function(e){this.props.onChange(e.target.value)};t.prototype.onClear=function(){var e=this.props,t=e.onClear,n=e.onChange;n("");if(t)t()};t.prototype.onEscape=function(){var e=this.props,t=e.value,n=e.onClear,r=e.onChange;if(t){r("")}else if(n){n()}};t.prototype.render=function(){var e=this;var t=this.props,n=t.className,r=t.type,a=t.placeholder,l=t.focusOnMount,o=t.value,i=t.onBlur;var u=l?focusOnInput:null;var c=["clearable-input"];if(n)c.push(n);if(!o)c.push("empty");return React.createElement("div",{className:c.join(" ")},React.createElement(global_event_listener_1.GlobalEventListener,{escape:function(){return e.onEscape()}}),React.createElement("input",{type:r||"text",placeholder:a,value:o||"",onChange:function(t){return e.onChange(t)},onBlur:i,ref:u}),o?React.createElement("div",{className:"clear",onClick:function(){return e.onClear()}},React.createElement(svg_icon_1.SvgIcon,{svg:little_pictures_1.X})):null)};return t}(React.Component);exports.ClearableInput=ClearableInput;