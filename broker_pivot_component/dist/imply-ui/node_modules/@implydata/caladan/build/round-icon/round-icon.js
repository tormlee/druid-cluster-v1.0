"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var little_pictures_1=require("@implydata/little-pictures");var classNames=require("classnames");var React=require("react");var info_manager_1=require("../info-manager/info-manager");var svg_icon_1=require("../svg-icon/svg-icon");var RoundIcon=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.state={};info_manager_1.InfoManager.subscribe(function(e){if(!t._mounted)return;t.setState({infoVisible:e&&e.sourceId===t.props.id})});return t}t.prototype.componentDidMount=function(){this._mounted=true};t.prototype.componentWillUnmount=function(){this._mounted=false};t.prototype.onClick=function(){var e=this.props,t=e.helpTitle,n=e.helpText,r=e.errorText,i=e.id;var o=this.state.infoVisible;if(o){info_manager_1.InfoManager.hide(i)}else{info_manager_1.InfoManager.show({sourceId:i,title:t,lines:[n,r].filter(Boolean),type:r?"error":"info"})}};t.prototype.renderIcon=function(){var e=this.props,t=e.helpText,n=e.errorText;var r=this.state.infoVisible;if(!t&&!n)return null;if(n){return React.createElement("div",{className:"icon-container error",onClick:this.onClick.bind(this)},React.createElement(svg_icon_1.SvgIcon,{className:"icon",svg:little_pictures_1.FULL_ERROR}))}if(r){return React.createElement("div",{className:"icon-container visible",onClick:this.onClick.bind(this)},React.createElement(svg_icon_1.SvgIcon,{className:"icon",svg:little_pictures_1.HELP}))}return React.createElement("div",{className:"icon-container",onClick:this.onClick.bind(this)},React.createElement(svg_icon_1.SvgIcon,{className:"icon",svg:little_pictures_1.HELP}))};t.prototype.render=function(){var e=this.props,t=e.errorText,n=e.isBubble;return React.createElement("div",{className:classNames("round-icon",{error:!!t,bubble:n})},this.renderIcon())};return t}(React.Component);exports.RoundIcon=RoundIcon;