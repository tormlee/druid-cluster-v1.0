"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var split_combine_1=require("../split-combine/split-combine");var splits_1=require("../splits/splits");var base_manifest_1=require("./base-manifest");var TableManifest=function(e){tslib_1.__extends(t,e);function t(){var t=e!==null&&e.apply(this,arguments)||this;t.name="table";t.title="Table";t.supportsMultipleMeasureMode=true;return t}t.prototype.canHandleSplitDimensions=function(e,t,i,n){if(!t.length){var s=e.filter(function(e){return e.getKind()==="string"}).slice(0,2);var r=function(e){return split_combine_1.SplitCombine.fromDimensionAndFilterAndMeasure(e,i,n)};return base_manifest_1.Resolve.rejectDimensions("The Table requires at least one split",s.map(function(e){return base_manifest_1.SplitSuggestion.fromTitleAndSplit("Add a split on "+e.title,r(e))}))}return base_manifest_1.Resolve.proceedWithDimensions()};t.prototype.getSuitability=function(e,t,i,n){var s=t.splitCombines.some(function(e){return!e.limitAction});var r=4;if(!s){r+=2}if(n){r+=1}return new base_manifest_1.Suitability(r)};t.prototype.getEffectiveSplits=function(e,t,i){var n=false;var s=e.splitCombines.map(function(e,s){if(!e.sortAction){n=true;e=e.changeSortAction(split_combine_1.SplitCombine.calculateSortOn(immutable_class_1.NamedArray.findByName(t,e.dimension),i))}if(!e.limitAction){n=true;e=e.changeLimit(s?5:50)}return e});return n?new splits_1.Splits(s):e};return t}(base_manifest_1.Manifest);exports.TableManifest=TableManifest;exports.TABLE_MANIFEST=new TableManifest;