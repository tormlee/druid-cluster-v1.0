"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var AccessList=function(s){tslib_1.__extends(e,s);function e(e){var t=s.call(this,e)||this;if(t.access==="specific"&&!t.users)t.users=[];return t}e.isAccessList=function(s){return s instanceof e};e.onlyFor=function(s){return new e({access:"single",users:[s]})};e.fromJS=function(s){return new e(immutable_class_1.BaseImmutable.jsToValue(e.PROPERTIES,s))};e.prototype.hasAccess=function(s){var e=this,t=e.access,i=e.users;if(s.isSuperAdmin())return true;if(t==="all")return true;return i.includes(s.name)};e.prototype.isOnly=function(s){return this.isSingle()&&this.users[0]===s};e.prototype.isAll=function(){return this.access==="all"};e.prototype.isSingle=function(){return this.access==="single"};e.prototype.isSpecific=function(){return this.access==="specific"};e.prototype.changeUsers=function(s){var t=this.valueOf();t.users=s;return new e(t)};e.prototype.toggle=function(s){var e=this.users;if(!this.isSpecific())throw new Error("Cannot toggle an user in "+this.access+" mode");if(e.includes(s)){return this.changeUsers(e.filter(function(e){return e!==s}))}else{return this.changeUsers(e.concat([s]))}};e.ACCESS_VALUES=["all","specific","single"];e.PROPERTIES=[{name:"access",possibleValues:e.ACCESS_VALUES},{name:"users",type:immutable_class_1.PropertyType.ARRAY}];return e}(immutable_class_1.BaseImmutable);exports.AccessList=AccessList;immutable_class_1.BaseImmutable.finalize(AccessList);AccessList.ALL=new AccessList({access:"all"});