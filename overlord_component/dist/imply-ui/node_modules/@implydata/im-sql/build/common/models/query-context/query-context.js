"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var lz_string_1=require("lz-string");var beltful_1=require("@implydata/beltful");var immutable_class_1=require("immutable-class");var chronoshift_1=require("chronoshift");var QueryContext=function(e){tslib_1.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.QueryContext=function(e){return e instanceof t};t.fromJS=function(e){return new t(immutable_class_1.BaseImmutable.jsToValue(t.PROPERTIES,e))};t.fromHash=function(e){try{return t.fromJS(JSON.parse(beltful_1.StringUtils.untidyB64(lz_string_1.decompressFromBase64(e))))}catch(e){return null}};t.prototype.toDruidContext=function(){var e={};var t=this,r=t.timezone,n=t.skipCache,u=t.onlyExactResults;if(r){e["sqlTimeZone"]=r}if(n){e["useCache"]=false}if(u){e["useApproximateTopN"]=false;e["useApproximateCountDistinct"]=false}return e};t.prototype.toHash=function(){return beltful_1.StringUtils.tidyB64(lz_string_1.compressToBase64(JSON.stringify(this.toJS())))};t.PROPERTIES=[{name:"timezone",defaultValue:chronoshift_1.Timezone.UTC,equal:function(e,t){return e&&t?e.toString()===t.toString():Boolean(e)===Boolean(t)}},{name:"skipCache",defaultValue:false},{name:"onlyExactResults",defaultValue:false},{name:"queryId",defaultValue:null}];return t}(immutable_class_1.BaseImmutable);exports.QueryContext=QueryContext;immutable_class_1.BaseImmutable.finalize(QueryContext);