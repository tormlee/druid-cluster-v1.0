"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var beltful_1=require("@implydata/beltful");var React=require("react");var KEY_CODES={ENTER:13,ESCAPE:27,LEFT:37,RIGHT:39};function enterKey(o){return o.which===KEY_CODES.ENTER}function escapeKey(o){return o.which===KEY_CODES.ESCAPE}function leftKey(o){return o.which===KEY_CODES.LEFT}function rightKey(o){return o.which===KEY_CODES.RIGHT}function alt(o){return o.altKey}var GlobalEventListener=function(o){tslib_1.__extends(t,o);function t(){var t=o.call(this)||this;t.propsToEvents={resize:"resize",scroll:"scroll",mouseDown:"mousedown",mouseMove:"mousemove",mouseUp:"mouseup",touchStart:"touchstart",touchMove:"touchmove",touchEnd:"touchend",touchCancel:"touchcancel",click:"click",keyDown:"keydown",keyUp:"keyup",altDown:"keydown",altUp:"keyup",enter:"keydown",escape:"keydown",right:"keydown",left:"keydown"};t.onResize=t.onResize.bind(t);t.onMousedown=t.onMousedown.bind(t);t.onMousemove=t.onMousemove.bind(t);t.onMouseup=t.onMouseup.bind(t);t.onTouchstart=t.onTouchstart.bind(t);t.onTouchmove=t.onTouchmove.bind(t);t.onTouchend=t.onTouchend.bind(t);t.onTouchcancel=t.onTouchcancel.bind(t);t.onClick=t.onClick.bind(t);t.onKeydown=t.onKeydown.bind(t);t.onKeyup=t.onKeyup.bind(t);t.onScroll=t.onScroll.bind(t);return t}t.prototype.componentWillReceiveProps=function(o){this.refreshListeners(o,this.props)};t.prototype.componentDidMount=function(){this.refreshListeners(this.props)};t.prototype.componentWillUnmount=function(){for(var o in this.propsToEvents){this.removeListener(this.propsToEvents[o])}};t.prototype.refreshListeners=function(o,t){if(t===void 0){t={}}var e=[];var n=[];for(var s in this.propsToEvents){var i=this.propsToEvents[s];if(t[s]&&o[s])continue;if(o[s]&&e.indexOf(i)===-1){e.push(i)}else if(t[s]&&n.indexOf(i)===-1){n.push(i)}}n.forEach(this.removeListener,this);e.forEach(this.addListener,this)};t.prototype.addListener=function(o){var t=this.props.useCaptureFor;window.addEventListener(o,this["on"+beltful_1.StringUtils.firstUp(o)],t.includes(o))};t.prototype.removeListener=function(o){var t=this.props.useCaptureFor;window.removeEventListener(o,this["on"+beltful_1.StringUtils.firstUp(o)],t.includes(o))};t.prototype.onClick=function(o){if(this.props.click)this.props.click(o)};t.prototype.onResize=function(){if(this.props.resize)this.props.resize()};t.prototype.onScroll=function(){if(this.props.scroll)this.props.scroll()};t.prototype.onMousedown=function(o){if(this.props.mouseDown)this.props.mouseDown(o)};t.prototype.onMousemove=function(o){if(this.props.mouseMove)this.props.mouseMove(o)};t.prototype.onMouseup=function(o){if(this.props.mouseUp)this.props.mouseUp(o)};t.prototype.onTouchstart=function(o){if(this.props.touchStart)this.props.touchStart(o)};t.prototype.onTouchmove=function(o){if(this.props.touchMove)this.props.touchMove(o)};t.prototype.onTouchend=function(o){if(this.props.touchEnd)this.props.touchEnd(o)};t.prototype.onTouchcancel=function(o){if(this.props.touchCancel)this.props.touchCancel(o)};t.prototype.onKeydown=function(o){if(this.props.escape&&escapeKey(o))this.props.escape(o);if(this.props.enter&&enterKey(o))this.props.enter(o);if(this.props.right&&rightKey(o))this.props.right(o);if(this.props.left&&leftKey(o))this.props.left(o);if(this.props.altDown&&alt(o)){this.isAltDown=true;this.props.altDown(o)}if(this.props.keyDown)this.props.keyDown(o)};t.prototype.onKeyup=function(o){if(this.props.altUp&&this.isAltDown){this.isAltDown=false;this.props.altUp(o)}if(this.props.keyUp)this.props.keyUp(o)};t.prototype.render=function(){return null};t.defaultProps={useCaptureFor:["scroll"]};return t}(React.Component);exports.GlobalEventListener=GlobalEventListener;