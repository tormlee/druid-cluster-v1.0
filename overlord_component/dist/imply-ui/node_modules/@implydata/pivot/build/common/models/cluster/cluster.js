"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var beltful_1=require("@implydata/beltful");var immutable_class_1=require("immutable-class");function ensureNotNative(e){if(e==="native"){throw new Error("can not be 'native'")}}var Cluster=function(e){tslib_1.__extends(t,e);function t(t){var l=e.call(this,t)||this;if(!l.title)l.title=l.name;switch(l.type){case"druid":l.database=null;l.user=null;l.password=null;break;case"mysql":case"postgres":l.introspectionStrategy=null;l.decorator=null;l.decoratorOptions=null;l.socksHost=null;l.socksUsername=null;l.socksPassword=null;break}if(l.ca&&l.protocol!=="tls"){l.ca=null}return l}t.isCluster=function(e){return e instanceof t};t.fromJS=function(e){if(!e.host&&(e.druidHost||e.brokerHost)){e.host=e.druidHost||e.brokerHost}if(typeof e.timeout==="string"){e.timeout=parseInt(e.timeout,10)}return new t(immutable_class_1.BaseImmutable.jsToValue(t.PROPERTIES,e))};t.prototype.toClientCluster=function(){return new t({name:this.name,type:this.type})};t.prototype.guessTitle=function(){return"My "+this.type+" cluster"};t.TYPE_VALUES=["druid","druidsql","mysql","postgres"];t.DEFAULT_TIMEOUT=4e4;t.DEFAULT_PROTOCOL="plain";t.PROTOCOL_VALUES=["plain","tls-loose","tls"];t.DEFAULT_INTROSPECTION_STRATEGY="segment-metadata-fallback";t.PROPERTIES=[{name:"name",validate:[beltful_1.StringUtils.verifyUrlSafeName,ensureNotNative]},{name:"type",possibleValues:t.TYPE_VALUES},{name:"host",defaultValue:null},{name:"title",defaultValue:""},{name:"version",defaultValue:null},{name:"timeout",defaultValue:t.DEFAULT_TIMEOUT},{name:"protocol",defaultValue:t.DEFAULT_PROTOCOL,possibleValues:t.PROTOCOL_VALUES},{name:"ca",defaultValue:null},{name:"introspectionStrategy",defaultValue:t.DEFAULT_INTROSPECTION_STRATEGY},{name:"decorator",defaultValue:null},{name:"decoratorOptions",defaultValue:null,equal:immutable_class_1.generalLookupsEqual},{name:"socksHost",defaultValue:null},{name:"socksUsername",defaultValue:null},{name:"socksPassword",defaultValue:null},{name:"database",defaultValue:null},{name:"user",defaultValue:null},{name:"password",defaultValue:null}];return t}(immutable_class_1.BaseImmutable);exports.Cluster=Cluster;immutable_class_1.BaseImmutable.finalize(Cluster);