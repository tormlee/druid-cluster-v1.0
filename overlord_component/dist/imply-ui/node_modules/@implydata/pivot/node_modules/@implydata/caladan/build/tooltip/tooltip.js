"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var React=require("react");var ReactDOM=require("react-dom");var shpitz_1=require("../shpitz/shpitz");var Tooltip=function(t){tslib_1.__extends(e,t);function e(){var e=t.call(this)||this;e.state={};e.onHover=e.onHover.bind(e);e.onLeave=e.onLeave.bind(e);return e}e.prototype.componentDidMount=function(){this._target.addEventListener("mouseover",this.onHover)};e.prototype.onHover=function(t){var e=this;var o=this.props.delay;if(!isNaN(this._timeout))return;this._timeout=window.setTimeout(function(){return e.showTooltip()},o);this._target.addEventListener("mouseleave",this.onLeave);this._target.removeEventListener("mouseover",this.onHover)};e.prototype.onLeave=function(t){if(!isNaN(this._timeout)){window.clearTimeout(this._timeout);this._timeout=NaN}else{this.hideTooltip()}this._target.addEventListener("mouseover",this.onHover);this._target.removeEventListener("mouseleave",this.onLeave)};e.prototype.showTooltip=function(){var t=this;this._timeout=NaN;var e=document.createElement("div");e.className="tooltip-container";this._tooltip=document.body.appendChild(e);this._component=ReactDOM.render(this.renderTooltip(),this._tooltip);window.setTimeout(function(){t._component=ReactDOM.render(t.renderTooltip(false),t._tooltip)},0)};e.prototype.hideTooltip=function(){ReactDOM.unmountComponentAtNode(this._tooltip);document.body.removeChild(this._tooltip)};e.prototype.renderTooltip=function(t){if(t===void 0){t=true}var e=this.props.label;var o=this._target.getBoundingClientRect(),i=o.left,r=o.top,n=o.width,s=o.height;var a={left:i+n*.5,top:t?r:r+s,opacity:t?0:1};var p={top:0,left:"50%"};return React.createElement("div",{style:a,className:"tooltip"},React.createElement("div",{className:"label"},e),React.createElement(shpitz_1.Shpitz,{style:p,direction:"down"}))};e.prototype.componentWillUnmount=function(){this._target.removeEventListener("mouseover",this.onHover);this._target.removeEventListener("mouseleave",this.onLeave);this.hideTooltip()};e.prototype.render=function(){var t=this;var e=this.props.children;return React.cloneElement(React.Children.only(e),{ref:function(e){return t._target=e}})};e.defaultProps={delay:300};return e}(React.Component);exports.Tooltip=Tooltip;