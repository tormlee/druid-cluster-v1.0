"use strict";var _this=this;var tslib_1=require("tslib");var nike_hercules_1=require("@implydata/nike-hercules");var innerServer=require("./app");var path=require("path");var config_1=require("./config");var sql_cluster_1=require("../common/models/sql-cluster/sql-cluster");var decorators_1=require("./utils/decorators/decorators");var wrapperServer=new nike_hercules_1.HerculesServer({serverRoot:null});wrapperServer.addStaticRoutes([path.join(__dirname,"../../build/public"),path.join(__dirname,"../../assets")]);wrapperServer.decorateReqRes();wrapperServer.getApp().use(nike_hercules_1.logAndTrack({morganFormat:':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] [rq=:requestId]',customTokens:{requestId:function(e,r){return e.requestId}}}));wrapperServer.getApp().use(function(e,r,s){var t={getAllClusters:function(){return tslib_1.__awaiter(_this,void 0,void 0,function(){return tslib_1.__generator(this,function(e){return[2,[{clusterId:"hello",queryHosts:["172.31.0.115"],socksHost:"localhost",protocol:"tls",ca:"-----BEGIN CERTIFICATE-----\n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\n-----END CERTIFICATE-----\n",name:"hey",decorator:"basicAuth",decoratorOptions:{myUsername:"admin",myPassword:"druid"}},{clusterId:"hello2",queryHosts:["172.31.11.140"],socksHost:"localhost",name:"hey2"}].map(sql_cluster_1.SqlCluster.fromJS)]})})}};e.logger=console;e.clusterActions=t;e.socksHost="localhost";e.user={name:"admin@bigdatacompany.com",email:"admin@bigdatacompany.com",firstName:"Admin",lastName:"Imply",permissionType:"admin",accountId:"c7e52d4b-b74b-42bf-81b4-168e7e651195",userId:"admin@bigdatacompany.com"};s()});var decorators=new decorators_1.Decorators({logger:nike_hercules_1.LOGGER,decorators:config_1.SERVER_SETTINGS.getResolvedDecorators()});wrapperServer.getApp().use(function(e,r,s){e.decorators=decorators;s()});wrapperServer.getApp().use("/",innerServer.makeServer({logoutHref:"/logout",homeHref:"/home"}).getApp());module.exports=wrapperServer;