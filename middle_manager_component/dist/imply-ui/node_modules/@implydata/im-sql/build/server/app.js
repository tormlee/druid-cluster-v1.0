"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var path=require("path");var nike_hercules_1=require("@implydata/nike-hercules");var queryRouter=require("./routes/query/query");var clusterRouter=require("./routes/cluster/cluster");var bodyParser=require("body-parser");var view_1=require("./view");function makeServer(e){var r=this;var t=e.homeHref,u=e.logoutHref;var i=new nike_hercules_1.HerculesServer({serverRoot:null});i.addStaticRoutes([path.join(__dirname,"../../build/public"),path.join(__dirname,"../../assets")]);i.getApp().use(bodyParser.json({limit:"1mb"}));i.addRoutes("/query",queryRouter);i.addRoutes("/cluster",clusterRouter);i.addRoutes("/",function(e,i,s){return tslib_1.__awaiter(r,void 0,void 0,function(){var r,s;return tslib_1.__generator(this,function(o){r=e.sideDrawerItems,s=e.simplePivot;i.send(view_1.sqlLayout({version:e.version,title:"SQL",user:e.user,sideDrawerItems:r,simplePivot:s,homeHref:t,logoutHref:u}));return[2]})})});return i}exports.makeServer=makeServer;