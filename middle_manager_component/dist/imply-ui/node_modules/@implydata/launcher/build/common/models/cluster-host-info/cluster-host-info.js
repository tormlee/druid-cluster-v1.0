"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var immutable_class_1=require("immutable-class");var ClusterHostInfo=function(t){tslib_1.__extends(e,t);function e(e){var r=t.call(this,e)||this;if(!r.hosts)r.hosts={};return r}e.isClusterHostInfo=function(t){return t instanceof e};e.fromClusterWithInfo=function(t){return e.fromJS(Object.assign({clusterId:t.clusterId,name:t.clusterId},t.info))};e.wrappedFromClusterWithInfo=function(t){try{return e.fromClusterWithInfo(t)}catch(t){throw new Error("Could not deserialize cluster meta from cluster with info: "+t.message)}};e.fromJS=function(t){var r=immutable_class_1.BaseImmutable.jsToValue(e.PROPERTIES,t);return new e(r)};e.prototype.getHostNames=function(t){var e=this.hosts;if(!e||!e[t])return[];return e[t].map(function(t){return t.ipAddress})};e.prototype.getQueryLoadBalancer=function(){var t=this.loadBalancers;if(!t)return null;return t["query"]?"http://"+t["query"]+":"+this.getQueryPort():null};e.prototype.getQueryHosts=function(){var t=this;return this.getHostNames(this.getQueryHostKey()).map(function(e){return"http://"+e+":"+t.getQueryPort()})};e.prototype.getPivotHosts=function(){var t=this;return this.getHostNames(this.getPivotHostKey()).map(function(e){return"http://"+e+":"+t.getPivotPort()})};e.prototype.hasPivots=function(){return this.getPivotHosts()&&this.getPivotHosts().length>0};e.prototype.getAllHosts=function(){var t=this;return[].concat.apply([],Object.keys(this.hosts).map(function(e){return t.hosts[e].map(function(t){return tslib_1.__assign({},t,{role:e})})}))};e.prototype.isRunning=function(){var t=this.state;return t==="RUNNING"};e.PROPERTIES=[{name:"name"},{name:"clusterId"},{name:"state"},{name:"hosts",defaultValue:null,equal:function(t,e){return JSON.stringify(t)===JSON.stringify(e)}},{name:"loadBalancers",defaultValue:null,equal:function(t,e){return JSON.stringify(t)===JSON.stringify(e)}},{name:"queryPort",defaultValue:8082},{name:"queryHostKey",defaultValue:"query"},{name:"pivotPort",defaultValue:9095},{name:"pivotHostKey",defaultValue:"query"}];return e}(immutable_class_1.BaseImmutable);exports.ClusterHostInfo=ClusterHostInfo;immutable_class_1.BaseImmutable.finalize(ClusterHostInfo);