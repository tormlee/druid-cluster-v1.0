"use strict";Object.defineProperty(exports,"__esModule",{value:true});var tslib_1=require("tslib");var beltful_1=require("@implydata/beltful");var classNames=require("classnames");var React=require("react");var ReactDOM=require("react-dom");var button_1=require("../button/button");var bubble_menu_1=require("../bubble-menu/bubble-menu");var BubbleButton=function(e){tslib_1.__extends(t,e);function t(){var t=e.call(this)||this;t.state={};return t}t.prototype.toggleMenu=function(){var e=this.state.menuOpen;this.setState({menuOpen:!e})};t.prototype.onItemClick=function(e,t){this.setState({menuOpen:false},function(){return e.onClick?e.onClick(t):null})};t.prototype.renderItem=function(e,t){var n=this;var r={key:t,className:classNames("item",e.className),onClick:function(t){return n.onItemClick(e,t)}};return e.href?React.createElement("a",tslib_1.__assign({},e.additionalProps,r,{target:"_blank",href:e.href}),e.label):React.createElement("li",tslib_1.__assign({},e.additionalProps,r),e.label)};t.prototype.render=function(){var e=this;var t=this.props,n=t.items,r=t.stage,a=t.insideId;var u=this.state.menuOpen;return React.createElement(button_1.Button,tslib_1.__assign({},this.props,{ref:function(t){return e._button=ReactDOM.findDOMNode(t)},onClick:function(){return e.toggleMenu()}}),u?React.createElement(bubble_menu_1.BubbleMenu,{className:"button-menu",direction:"down",openOn:this._button,stage:r,insideId:a,onClose:function(){return e.setState({menuOpen:false})}},React.createElement("ul",{className:"bubble-list"},n.map(this.renderItem,this))):null)};t.defaultProps={stage:beltful_1.Stage.fromJS({x:0,y:0,width:100,height:100})};return t}(React.Component);exports.BubbleButton=BubbleButton;